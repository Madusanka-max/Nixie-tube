<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nixie Tube Stats</title>
  <style>
    body {
      margin: 0;
      background-color: #0b0b0b;
      color: #f0e7d8;
      font-family: 'Courier New', monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 70px;
      text-align: center;
      justify-content: center;
      padding: 40px;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .tube-group {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      padding: 20px;
      border-radius: 30px;
      background: radial-gradient(circle, rgba(30, 30, 30, 0.3), transparent 70%);
    }

    .tube {
      position: relative;
      width: 100px;
      height: 180px;
      margin: 0;
      /* Bulb shape with more pronounced curvature */
      background: radial-gradient(circle at center, #1a1a1a 25%, #000 85%);
      border-radius: 50%;
      border: 6px solid #2a2a2a;
      box-shadow: 
        inset 0 0 40px rgba(0, 0, 0, 0.8),
        inset 0 0 80px rgba(255, 100, 0, 0.1),
        0 0 30px rgba(255, 136, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      animation: tubeGlow 4s infinite ease-in-out;
      perspective: 500px;
      /* Make it look more like a 3D bulb */
      transform-style: preserve-3d;
    }

    /* Neon gas glow flicker */
    @keyframes tubeGlow {
      0%, 100% { 
        box-shadow: 
          inset 0 0 40px rgba(0, 0, 0, 0.8),
          inset 0 0 80px rgba(255, 100, 0, 0.1),
          0 0 30px rgba(255, 136, 0, 0.3),
          0 0 40px rgba(255, 100, 0, 0.2);
      }
      50% { 
        box-shadow: 
          inset 0 0 40px rgba(0, 0, 0, 0.8),
          inset 0 0 100px rgba(255, 150, 0, 0.3),
          0 0 45px rgba(255, 150, 0, 0.5),
          0 0 60px rgba(255, 120, 0, 0.4);
      }
    }

    /* Base of the bulb */
    .tube-base {
      position: absolute;
      bottom: -25px;
      width: 60px;
      height: 30px;
      background: linear-gradient(to bottom, #2a2a2a, #1a1a1a);
      border-radius: 10px 10px 30px 30px;
      border: 3px solid #333;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      z-index: 5;
    }

    /* Metal contacts at the bottom */
    .tube-contact {
      position: absolute;
      bottom: -35px;
      width: 15px;
      height: 15px;
      background: #444;
      border-radius: 50%;
      border: 2px solid #333;
      box-shadow: inset 0 2px 5px rgba(255, 255, 255, 0.2);
    }

    .tube-contact:nth-child(1) {
      left: 22px;
    }

    .tube-contact:nth-child(2) {
      right: 22px;
    }

    /* Glass refraction effect - makes it look like real glass bulb */
    .tube-glass {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 50%;
      background: radial-gradient(
        circle at 30% 30%, 
        rgba(255, 255, 255, 0.15) 0%, 
        rgba(255, 255, 255, 0.05) 30%, 
        transparent 60%
      );
      z-index: 6;
      pointer-events: none;
      mix-blend-mode: screen;
      animation: glass-refraction 8s ease-in-out infinite;
    }

    @keyframes glass-refraction {
      0%, 100% { 
        transform: rotate(0deg) scale(1);
        opacity: 0.4;
      }
      50% { 
        transform: rotate(2deg) scale(1.02);
        opacity: 0.6;
      }
    }

    /* Glow halo - more pronounced for bulb effect */
    .tube:before {
      content: "";
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 90%;
      border-radius: 50%;
      background: radial-gradient(
        circle, 
        rgba(255, 136, 0, 0.3) 0%, 
        rgba(255, 100, 0, 0.2) 40%, 
        transparent 80%
      );
      filter: blur(20px);
      z-index: 0;
      animation: glow-pulse 3s infinite alternate;
    }

    @keyframes glow-pulse {
      0% { opacity: 0.6; }
      100% { opacity: 0.8; }
    }

    /* Enhanced glass reflection */
    .tube:after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(ellipse at top left, rgba(255,255,255,0.4) 10%, transparent 60%),
                  radial-gradient(ellipse at bottom right, rgba(255,255,255,0.15) 15%, transparent 70%),
                  radial-gradient(ellipse at top right, rgba(255,255,255,0.2) 5%, transparent 50%);
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: 5;
      animation: glassHighlight 10s ease-in-out infinite;
    }

    @keyframes glassHighlight {
      0%, 100% { transform: translateX(-5%) translateY(-5%) rotate(0deg); opacity: 0.5; }
      25% { transform: translateX(0%) translateY(0%) rotate(1deg); opacity: 0.6; }
      50% { transform: translateX(5%) translateY(5%) rotate(2deg); opacity: 0.8; }
      75% { transform: translateX(0%) translateY(0%) rotate(1deg); opacity: 0.6; }
    }

    /* Curved mesh wires with depth */
    .mesh {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      bottom: 40px; /* Leave space for base */
      z-index: 3;
      pointer-events: none;
      border-radius: 50%;
      overflow: hidden;
    }

    /* Horizontal wires */
    .mesh-h {
      position: absolute;
      width: 100%;
      height: 1px;
      background: rgba(200, 200, 200, 0.25);
      left: 0;
    }

    /* Vertical wires with curvature */
    .mesh-v {
      position: absolute;
      height: 100%;
      width: 1px;
      background: rgba(200, 200, 200, 0.2);
      top: 0;
      transform-origin: center;
    }

    /* Number container for depth effect */
    .number-container {
      position: relative;
      z-index: 2;
      transform-style: preserve-3d;
      transform: translateZ(-30px); /* Push numbers further behind the mesh */
      filter: blur(0.8px); /* Slightly more blur for depth */
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .number {
      /* Make the number fill the container */
      font-size: 8rem;
      font-weight: bold;
      color: #ff6600;
      text-shadow: 0 0 15px #ff8800, 0 0 40px #ff6600, 0 0 80px #ff3300;
      position: relative;
      opacity: 0;
      line-height: 0.75;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
      padding: 0;
      transform: translateZ(0);
      /* Add subtle distortion to simulate glass refraction */
      filter: brightness(1.1);
    }

    /* Hide all plus signs by default */
    .plus-sign {
      display: none;
    }

    /* Show the plus sign only after animation completes */
    .show-plus .plus-sign {
      display: block !important;
      position: absolute;
      font-size: 2.8rem;
      right: 8px;
      top: 55%;
      transform: translateY(-50%);
      color: #ff6600;
      text-shadow: 0 0 12px #ff8800, 0 0 35px #ff6600;
      animation: plus-glow 2s infinite alternate;
    }

    @keyframes plus-glow {
      0% { text-shadow: 0 0 10px #ff8800, 0 0 30px #ff6600; }
      100% { text-shadow: 0 0 15px #ff9900, 0 0 40px #ff6600, 0 0 60px #ff3300; }
    }

    /* Authentic Nixie tube digit change animation */
    @keyframes nixieDigitChange {
      0% { opacity: 1; transform: translateZ(0); text-shadow: 0 0 15px #ff8800, 0 0 40px #ff6600; }
      40% { opacity: 0.8; transform: translateZ(-8px); text-shadow: 0 0 10px #ff8800, 0 0 30px #ff6600; }
      50% { opacity: 0; transform: translateZ(-15px); text-shadow: none; }
      60% { opacity: 0.3; transform: translateZ(-8px); text-shadow: 0 0 8px #ff8800, 0 0 25px #ff6600; }
      70% { opacity: 0.7; transform: translateZ(0); text-shadow: 0 0 12px #ff8800, 0 0 35px #ff6600; }
      100% { opacity: 1; transform: translateZ(0); text-shadow: 0 0 15px #ff8800, 0 0 40px #ff6600; }
    }

    @keyframes nixieFlicker {
      0% { opacity: 0.7; text-shadow: 0 0 10px #ff8800, 0 0 30px #ff6600; }
      25% { opacity: 1; text-shadow: 0 0 15px #ff8800, 0 0 40px #ff6600; }
      50% { opacity: 0.8; text-shadow: 0 0 12px #ff8800, 0 0 35px #ff6600; }
      75% { opacity: 1; text-shadow: 0 0 18px #ff8800, 0 0 45px #ff6600, 0 0 70px #ff3300; }
      100% { opacity: 1; text-shadow: 0 0 15px #ff8800, 0 0 40px #ff6600; }
    }

    .label {
      margin-top: 20px;
      font-size: 1.2rem;
      color: #f0e7d8;
      text-align: center;
      width: 100%;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }

    /* Add parallax effect on mouse move */
    .tube:hover .number-container {
      transform: translateZ(-30px) translateY(-5px);
      transition: transform 0.5s ease;
    }

    /* Subtle floating animation */
    .tube {
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-5px) rotate(0.5deg); }
    }
  </style>
</head>
<body>
  <div class="stats">
    <div class="stat-item">
      <div class="tube-group">
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-1"></div>
          <div class="number-container">
            <div class="number" data-target="1">0</div>
          </div>
        </div>
      </div>
      <div class="label">Years of Innovation</div>
    </div>
    
    <div class="stat-item">
      <div class="tube-group">
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-2"></div>
          <div class="number-container">
            <div class="number" data-target="7">0</div>
          </div>
        </div>
      </div>
      <div class="label">Student Associations</div>
    </div>
    
    <div class="stat-item">
      <div class="tube-group">
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-3"></div>
          <div class="number-container">
            <div class="number" data-digit="0" data-target="1">0</div>
          </div>
        </div>
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-4"></div>
          <div class="number-container">
            <div class="number" data-digit="1" data-target="3">0</div>
          </div>
        </div>
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-5"></div>
          <div class="number-container">
            <div class="number" data-digit="2" data-target="0">0</div>
          </div>
        </div>
      </div>
      <div class="label">Innovative Projects Showcased</div>
    </div>
    
    <div class="stat-item">
      <div class="tube-group">
        <div class="tube">
          <div class="tube-base"></div>
          <div class="tube-contact"></div>
          <div class="tube-contact"></div>
          <div class="tube-glass"></div>
          <div class="mesh" id="mesh-6"></div>
          <div class="number-container">
            <div class="number" data-target="6">0</div>
          </div>
        </div>
      </div>
      <div class="label">Govt. & Private Sector Participation</div>
    </div>
  </div>

  <script>
    // Function to create realistic mesh grid with curvature
    function createMesh(meshElement) {
      // Clear any existing mesh wires
      meshElement.innerHTML = '';
      
      // Create horizontal wires
      for (let i = 0; i < 20; i++) {
        const hWire = document.createElement('div');
        hWire.className = 'mesh-h';
        hWire.style.top = `${(i * 7) + 10}px`;
        hWire.style.opacity = 0.2 + (Math.random() * 0.1);
        meshElement.appendChild(hWire);
      }
      
      // Create vertical wires with curvature effect
      const containerWidth = meshElement.offsetWidth;
      const centerX = containerWidth / 2;
      
      for (let i = 0; i < 13; i++) {
        const vWire = document.createElement('div');
        vWire.className = 'mesh-v';
        
        // Position the wire
        const xPos = (i * 7) + 8;
        vWire.style.left = `${xPos}px`;
        
        // Calculate curvature based on distance from center
        const distanceFromCenter = Math.abs(xPos - centerX);
        const maxDistance = centerX;
        const curvatureFactor = (distanceFromCenter / maxDistance) * 12; // Maximum 12px curve
        
        // Apply curvature with CSS transform
        vWire.style.transform = `translateX(${(Math.random() > 0.5 ? 1 : -1) * curvatureFactor * 0.8}px) scaleX(${1 + (distanceFromCenter / maxDistance) * 0.2})`;
        
        // Vary opacity based on position (darker in center, lighter at edges)
        const opacity = 0.15 + (0.08 * (1 - distanceFromCenter / maxDistance));
        vWire.style.opacity = opacity + (Math.random() * 0.05);
        
        meshElement.appendChild(vWire);
      }
    }
    
    // Initialize all meshes when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Wait for layout to be calculated before creating mesh
      setTimeout(() => {
        document.querySelectorAll('.mesh').forEach(mesh => {
          createMesh(mesh);
        });
      }, 100);
      
      // Handle single digit tubes
      const singleDigitTubes = document.querySelectorAll('.tube-group:not(:has(.tube:nth-child(2))) .number');
      
      // Handle multi-digit tubes (specifically for 130)
      const multiDigitGroups = document.querySelectorAll('.tube-group:has(.tube:nth-child(2))');
      
      // Function to simulate authentic Nixie tube digit change
      function changeDigit(el, fromValue, toValue, callback) {
        // Apply the digit change animation
        el.style.animation = 'nixieDigitChange 0.4s ease-in-out';
        
        // During the animation (when opacity is lowest), change the digit
        setTimeout(() => {
          el.textContent = toValue;
        }, 200);
        
        // After animation completes, set up the flicker and call callback
        setTimeout(() => {
          el.style.animation = 'nixieFlicker 2s ease-in-out infinite';
          if (callback) callback();
        }, 400);
      }
      
      function animateSingleDigit(el, target) {
        let warmup = 1000 + Math.random() * 500; // warm-up delay simulating gas ignition
        setTimeout(() => {
          let flickers = 6; // number of random flickers before final
          let i = 0;
          
          function flicker() {
            if (i < flickers) {
              // Random digit flicker with authentic change animation
              const randomDigit = Math.floor(Math.random() * 10);
              changeDigit(el, el.textContent, randomDigit, () => {
                i++;
                setTimeout(flicker, 200 + Math.random() * 300);
              });
            } else {
              // Sequential count-up with authentic digit changes
              let current = 0;
              
              function countUp() {
                if (current < target) {
                  current++;
                  changeDigit(el, current - 1, current, () => {
                    setTimeout(countUp, 300 + Math.random() * 200);
                  });
                } else {
                  // Add the plus sign after counting completes
                  el.parentElement.classList.add('show-plus');
                }
              }
              
              countUp();
            }
          }
          
          // Start with initial flicker
          changeDigit(el, 0, Math.floor(Math.random() * 10), () => {
            i++;
            setTimeout(flicker, 400);
          });
        }, warmup);
      }
      
      function animateMultiDigit(group, targetNumber) {
        const digitElements = group.querySelectorAll('.number');
        const digits = targetNumber.toString().split('');
        
        // Set the target for each digit
        digitElements.forEach((el, index) => {
          if (index < digits.length) {
            el.setAttribute('data-target', digits[index]);
          }
        });
        
        // Staggered animation for each digit
        digitElements.forEach((el, index) => {
          let warmup = 1500 + (index * 300) + Math.random() * 400; // Staggered warm-up
          setTimeout(() => {
            let flickers = 5; // number of flickers before final
            let i = 0;
            
            function flicker() {
              if (i < flickers) {
                const randomDigit = Math.floor(Math.random() * 10);
                changeDigit(el, el.textContent, randomDigit, () => {
                  i++;
                  setTimeout(flicker, 200 + Math.random() * 300);
                });
              } else {
                // Sequential count-up for this digit
                const target = parseInt(el.getAttribute('data-target'), 10);
                let current = 0;
                
                function countUp() {
                  if (current < target) {
                    current++;
                    changeDigit(el, current - 1, current, () => {
                      setTimeout(countUp, 300 + Math.random() * 200);
                    });
                  } else {
                    // Add the plus sign to the first digit after counting completes
                    if (index === 0) {
                      el.parentElement.classList.add('show-plus');
                    }
                  }
                }
                
                countUp();
              }
            }
            
            // Start with initial flicker
            changeDigit(el, 0, Math.floor(Math.random() * 10), () => {
              i++;
              setTimeout(flicker, 400);
            });
          }, warmup);
        });
      }
      
      // Setup Intersection Observer
      const io = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          
          const el = entry.target;
          
          // Check if this is part of a multi-digit group
          const tubeGroup = el.closest('.tube-group');
          if (tubeGroup.querySelectorAll('.tube').length > 1) {
            // This is a multi-digit display
            const targetNumber = 130; // For our specific case
            animateMultiDigit(tubeGroup, targetNumber);
          } else {
            // This is a single digit
            const target = parseInt(el.getAttribute('data-target'), 10) || 0;
            animateSingleDigit(el, target);
          }
          
          observer.unobserve(el);
        });
      }, { threshold: 0.4 });
      
      // Observe single digit tubes
      singleDigitTubes.forEach(c => io.observe(c));
      
      // Observe the first digit of multi-digit groups
      document.querySelectorAll('.tube-group:has(.tube:nth-child(2)) .number:first-child').forEach(c => io.observe(c));
      
      // Add subtle parallax effect on mouse move
      document.querySelectorAll('.tube').forEach(tube => {
        tube.addEventListener('mousemove', (e) => {
          const rect = tube.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          
          const moveX = (x - centerX) / 25;
          const moveY = (y - centerY) / 25;
          
          const numberContainer = tube.querySelector('.number-container');
          if (numberContainer) {
            numberContainer.style.transform = `translateZ(-30px) translateX(${moveX}px) translateY(${moveY}px)`;
          }
          
          // Also add subtle tilt to the entire tube
          const tiltX = (y - centerY) / 30;
          const tiltY = (x - centerX) / 30;
          tube.style.transform = `perspective(500px) rotateX(${-tiltX}deg) rotateY(${tiltY}deg)`;
        });
        
        tube.addEventListener('mouseleave', () => {
          const numberContainer = tube.querySelector('.number-container');
          if (numberContainer) {
            numberContainer.style.transform = 'translateZ(-30px)';
          }
          tube.style.transform = 'perspective(500px)';
        });
      });
    });
  </script>
</body>
</html>